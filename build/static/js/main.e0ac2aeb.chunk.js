(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASQAAABBCAMAAABPaSmDAAAC+lBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////86i/ucAAAA/XRSTlMAAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJT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"},263:function(e,t,a){e.exports=a.p+"static/media/advchat.61ba557f.png"},277:function(e,t,a){e.exports=a(495)},286:function(e,t,a){},495:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(18),s=a(20),o=a(19),l=a(21),i=a(0),c=a.n(i),u=a(64),d=a.n(u),m=a(520),h=(a(286),a(34)),f=a(517),p=a(150),g=a.n(p);a(295),a(297),a(497);g.a.initializeApp({apiKey:"AIzaSyDlg91rQmL6HBpO7jCEseTm9lFaOJwM38o",authDomain:"slack-chat-react.firebaseapp.com",databaseURL:"https://slack-chat-react.firebaseio.com",projectId:"slack-chat-react",storageBucket:"slack-chat-react.appspot.com",messagingSenderId:"1065125380863"});var v=g.a,C=a(236),E=a.n(C),y=a(521),b=a(513),S=a(496),k=a(511),A=a(505),w=a(518),O=a(146),j=a(105),U=a.n(j),R=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={user:a.props.currentUser,modal:!1,previewImage:"",croppedImage:"",blob:null,uploadedCroppedImage:"",storageRef:v.storage().ref(),userRef:v.auth().currentUser,usersRef:v.database().ref("users"),metadata:{contentType:"image/jpeg"}},a.openModal=function(){return a.setState({modal:!0})},a.closeModal=function(){return a.setState({modal:!1})},a.dropdownOptions=function(){return[{key:"user",text:c.a.createElement("span",null,"Signed in as ",c.a.createElement("strong",null,a.state.user.displayName)),disabled:!0},{key:"avatar",text:c.a.createElement("span",{onClick:a.openModal},"Change Avatar")},{key:"signout",text:c.a.createElement("span",{onClick:a.handleSignout},"Sign Out")}]},a.uploadCroppedImage=function(){var e=a.state,t=e.storageRef,n=e.userRef,r=e.blob,s=e.metadata;t.child("avatars/users/".concat(n.uid)).put(r,s).then(function(e){e.ref.getDownloadURL().then(function(e){a.setState({uploadedCroppedImage:e},function(){return a.changeAvatar()})})})},a.changeAvatar=function(){a.state.userRef.updateProfile({photoURL:a.state.uploadedCroppedImage}).then(function(){console.log("PhotoURL updated"),a.closeModal()}).catch(function(e){console.error(e)}),a.state.usersRef.child(a.state.user.uid).update({avatar:a.state.uploadedCroppedImage}).then(function(){console.log("User avatar updated")}).catch(function(e){console.error(e)})},a.handleChange=function(e){var t=e.target.files[0],n=new FileReader;t&&(n.readAsDataURL(t),n.addEventListener("load",function(){a.setState({previewImage:n.result})}))},a.handleCropImage=function(){a.avatarEditor&&a.avatarEditor.getImageScaledToCanvas().toBlob(function(e){var t=URL.createObjectURL(e);a.setState({croppedImage:t,blob:e})})},a.handleSignout=function(){v.auth().signOut().then(function(){return console.log("signed out!")})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.modal,r=t.previewImage,s=t.croppedImage;this.props.primaryColor;return c.a.createElement(m.a,null,c.a.createElement(m.a.Column,null,c.a.createElement(m.a.Row,{style:{padding:"1.2em",margin:0}},c.a.createElement(y.a,{inverted:!0,floated:"left",as:"h1"},c.a.createElement("img",{src:U.a,alt:"Advanced Nursing",style:{width:160,marginBottom:30}})),c.a.createElement(y.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},c.a.createElement(b.a,{trigger:c.a.createElement("span",null,c.a.createElement(S.a,{src:a.photoURL,spaced:"right",avatar:!0}),a.displayName),options:this.dropdownOptions()}))),c.a.createElement(k.a,{basic:!0,open:n,onClose:this.closeModal},c.a.createElement(k.a.Header,null,"Change Avatar"),c.a.createElement(k.a.Content,null,c.a.createElement(A.a,{onChange:this.handleChange,fluid:!0,type:"file",label:"New Avatar",name:"previewImage"}),c.a.createElement(m.a,{centered:!0,stackable:!0,columns:2},c.a.createElement(m.a.Row,{centered:!0},c.a.createElement(m.a.Column,{className:"ui center aligned grid"},r&&c.a.createElement(E.a,{ref:function(t){return e.avatarEditor=t},image:r,width:120,height:120,border:50,scale:1.2})),c.a.createElement(m.a.Column,null,s&&c.a.createElement(S.a,{style:{margin:"3.5em auto"},width:100,height:100,src:s}))))),c.a.createElement(k.a.Actions,null,s&&c.a.createElement(w.a,{color:"green",inverted:!0,onClick:this.uploadCroppedImage},c.a.createElement(O.a,{name:"save"})," Change Avatar"),c.a.createElement(w.a,{color:"green",inverted:!0,onClick:this.handleCropImage},c.a.createElement(O.a,{name:"image"})," Preview"),c.a.createElement(w.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(O.a,{name:"remove"})," Cancel")))))}}]),t}(c.a.Component),N=a(66),L=a(36),P=function(e){return{type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}}},I=function(e){return{type:"SET_PRIVATE_CHANNEL",payload:{isPrivateChannel:e}}},T=a(233),M=a(510),B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={activeChannel:"",user:a.props.currentUser,channel:null,channels:[],channelName:"",channelDetails:"",channelsRef:v.database().ref("channels"),messagesRef:v.database().ref("messages"),typingRef:v.database().ref("typing"),notifications:[],modal:!1,firstLoad:!0},a.addListeners=function(){var e=[];a.state.channelsRef.on("child_added",function(t){e.push(t.val()),a.setState({channels:e},function(){return a.setFirstChannel()}),a.addNotificationListener(t.key)})},a.addNotificationListener=function(e){a.state.messagesRef.child(e).on("value",function(t){a.state.channel&&a.handleNotifications(e,a.state.channel.id,a.state.notifications,t)})},a.handleNotifications=function(e,t,n,r){var s=0,o=n.findIndex(function(t){return t.id===e});-1!==o?(e!==t&&(s=n[o].total,r.numChildren()-s>0&&(n[o].count=r.numChildren()-s)),n[o].lastKnownTotal=r.numChildren()):n.push({id:e,total:r.numChildren(),lastKnownTotal:r.numChildren(),count:0}),a.setState({notifications:n})},a.removeListeners=function(){a.state.channelsRef.off(),a.state.channels.forEach(function(e){a.state.messagesRef.child(e.id).off()})},a.setFirstChannel=function(){var e=a.state.channels[0];a.state.firstLoad&&a.state.channels.length>0&&(a.props.setCurrentChannel(e),a.setActiveChannel(e),a.setState({channel:e})),a.setState({firstLoad:!1})},a.addChannel=function(){var e=a.state,t=e.channelsRef,n=e.channelName,r=e.channelDetails,s=e.user,o=t.push().key,l={id:o,name:n,details:r,createdBy:{name:s.displayName,avatar:s.photoURL}};t.child(o).update(l).then(function(){a.setState({channelName:"",channelDetails:""}),a.closeModal(),console.log("channel added")}).catch(function(e){console.error(e)})},a.handleSubmit=function(e){e.preventDefault(),a.isFormValid(a.state)&&a.addChannel()},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.changeChannel=function(e){a.setActiveChannel(e),a.state.typingRef.child(a.state.channel.id).child(a.state.user.uid).remove(),a.clearNotifications(),a.props.setCurrentChannel(e),a.props.setPrivateChannel(!1),a.setState({channel:e})},a.clearNotifications=function(){var e=a.state.notifications.findIndex(function(e){return e.id===a.state.channel.id});if(-1!==e){var t=Object(N.a)(a.state.notifications);t[e].total=a.state.notifications[e].lastKnownTotal,t[e].count=0,a.setState({notifications:t})}},a.setActiveChannel=function(e){a.setState({activeChannel:e.id})},a.getNotificationCount=function(e){var t=0;if(a.state.notifications.forEach(function(a){a.id===e.id&&(t=a.count)}),t>0)return t},a.displayChannels=function(e){return e.length>0&&e.map(function(e){return c.a.createElement(f.a.Item,{key:e.id,onClick:function(){return a.changeChannel(e)},name:e.name,style:{opacity:.7},active:e.id===a.state.activeChannel},a.getNotificationCount(e)&&c.a.createElement(T.a,{color:"red"},a.getNotificationCount(e)),"# ",e.name)})},a.isFormValid=function(e){var t=e.channelName,a=e.channelDetails;return t&&a},a.openModal=function(){return a.setState({modal:!0})},a.closeModal=function(){return a.setState({modal:!1})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,t=e.channels,a=e.modal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a.Menu,{className:"menu"},c.a.createElement(f.a.Item,null,c.a.createElement("span",null,c.a.createElement(O.a,{name:"comments"})," PUBLIC")," ","(",t.length,") ",c.a.createElement(O.a,{name:"add",onClick:this.openModal})),this.displayChannels(t)),c.a.createElement(k.a,{basic:!0,open:a,onClose:this.closeModal},c.a.createElement(k.a.Header,null,"Add a Channel"),c.a.createElement(k.a.Content,null,c.a.createElement(M.a,{onSubmit:this.handleSubmit},c.a.createElement(M.a.Field,null,c.a.createElement(A.a,{fluid:!0,label:"Name of Channel",name:"channelName",onChange:this.handleChange})),c.a.createElement(M.a.Field,null,c.a.createElement(A.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:this.handleChange})))),c.a.createElement(k.a.Actions,null,c.a.createElement(w.a,{color:"green",inverted:!0,onClick:this.handleSubmit},c.a.createElement(O.a,{name:"checkmark"})," Add"),c.a.createElement(w.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(O.a,{name:"remove"})," Cancel"))))}}]),t}(c.a.Component),F=Object(h.b)(null,{setCurrentChannel:P,setPrivateChannel:I})(B),D=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={activeChannel:"",user:a.props.currentUser,users:[],usersRef:v.database().ref("users"),connectedRef:v.database().ref(".info/connected"),presenceRef:v.database().ref("presence")},a.removeListeners=function(){a.state.usersRef.off(),a.state.presenceRef.off(),a.state.connectedRef.off()},a.addListeners=function(e){var t=[];a.state.usersRef.on("child_added",function(n){if(e!==n.key){var r=n.val();r.uid=n.key,r.status="offline",t.push(r),a.setState({users:t})}}),a.state.connectedRef.on("value",function(t){if(!0===t.val()){var n=a.state.presenceRef.child(e);n.set(!0),n.onDisconnect().remove(function(e){null!==e&&console.error(e)})}}),a.state.presenceRef.on("child_added",function(t){e!==t.key&&a.addStatusToUser(t.key)}),a.state.presenceRef.on("child_removed",function(t){e!==t.key&&a.addStatusToUser(t.key,!1)})},a.addStatusToUser=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a.state.users.reduce(function(a,n){return n.uid===e&&(n.status="".concat(t?"online":"offline")),a.concat(n)},[]);a.setState({users:n})},a.isUserOnline=function(e){return"online"===e.status},a.changeChannel=function(e){var t={id:a.getChannelId(e.uid),name:e.name};a.props.setCurrentChannel(t),a.props.setPrivateChannel(!0),a.setActiveChannel(e.uid)},a.getChannelId=function(e){var t=a.state.user.uid;return e<t?"".concat(e,"/").concat(t):"".concat(t,"/").concat(e)},a.setActiveChannel=function(e){a.setState({activeChannel:e})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.activeChannel;return c.a.createElement(f.a.Menu,{className:"menu"},c.a.createElement(f.a.Item,null,c.a.createElement("span",null,c.a.createElement(O.a,{name:"mail"})," PRIVATE")," ","(",a.length,")"),a.map(function(t){return c.a.createElement(f.a.Item,{key:t.uid,active:t.uid===n,onClick:function(){return e.changeChannel(t)},style:{opacity:.7,fontStyle:"italic"}},c.a.createElement(O.a,{name:"circle",color:e.isUserOnline(t)?"green":"red"}),"@ ",t.name)}))}}]),t}(c.a.Component),x=Object(h.b)(null,{setCurrentChannel:P,setPrivateChannel:I})(D),z=a(54),W=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={user:a.props.currentUser,usersRef:v.database().ref("users"),activeChannel:"",starredChannels:[]},a.removeListener=function(){a.state.usersRef.child("".concat(a.state.user.uid,"/starred")).off()},a.addListeners=function(e){a.state.usersRef.child(e).child("starred").on("child_added",function(e){var t=Object(z.a)({id:e.key},e.val());a.setState({starredChannels:[].concat(Object(N.a)(a.state.starredChannels),[t])})}),a.state.usersRef.child(e).child("starred").on("child_removed",function(e){var t=Object(z.a)({id:e.key},e.val()),n=a.state.starredChannels.filter(function(e){return e.id!==t.id});a.setState({starredChannels:n})})},a.setActiveChannel=function(e){a.setState({activeChannel:e.id})},a.changeChannel=function(e){a.setActiveChannel(e),a.props.setCurrentChannel(e),a.props.setPrivateChannel(!1)},a.displayChannels=function(e){return e.length>0&&e.map(function(e){return c.a.createElement(f.a.Item,{key:e.id,onClick:function(){return a.changeChannel(e)},name:e.name,style:{opacity:.7},active:e.id===a.state.activeChannel},"# ",e.name)})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"componentWillUnmount",value:function(){this.removeListener()}},{key:"render",value:function(){var e=this.state.starredChannels;return c.a.createElement(f.a.Menu,{className:"menu"},c.a.createElement(f.a.Item,null,c.a.createElement("span",null,c.a.createElement(O.a,{name:"star"})," IMPORTANT")," ","(",e.length,")"),this.displayChannels(e))}}]),t}(c.a.Component),V=Object(h.b)(null,{setCurrentChannel:P,setPrivateChannel:I})(W),K=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.primaryColor;return c.a.createElement(f.a,{size:"large",inverted:!0,fixed:"left",vertical:!0,style:{background:"rgb(83, 54, 88)",fontSize:"1.2rem"}},c.a.createElement(R,{primaryColor:a,currentUser:t}),c.a.createElement(V,{currentUser:t}),c.a.createElement(F,{currentUser:t}),c.a.createElement(x,{currentUser:t}))}}]),t}(c.a.Component),Q=a(523),H=a(512),J=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.channelName,a=e.numUniqueUsers,n=e.handleSearchChange,r=e.searchLoading,s=e.isPrivateChannel,o=e.handleStar,l=e.isChannelStarred;return c.a.createElement(Q.a,{clearing:!0},c.a.createElement(y.a,{fluid:"true",as:"h3",floated:"left",style:{marginBottom:0}},c.a.createElement("span",null,t,!s&&c.a.createElement(O.a,{onClick:o,name:l?"star":"star outline",color:l?"yellow":"black"})),c.a.createElement(y.a.Subheader,null,a)),c.a.createElement(y.a,{floated:"right"},c.a.createElement(A.a,{loading:r,onChange:n,size:"mini",icon:"search",name:"searchTerm",placeholder:"Search"})))}}]),t}(c.a.Component),Z=a(258),G=a.n(Z),q=a(155),X=(a(483),a(154)),Y=a.n(X),_=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={file:null,authorized:["image/jpeg","image/png"]},a.addFile=function(e){var t=e.target.files[0];t&&a.setState({file:t})},a.sendFile=function(){var e=a.state.file,t=a.props,n=t.uploadFile,r=t.closeModal;null!==e&&(a.isAuthorized(e.name)&&(n(e,{contentType:Y.a.lookup(e.name)}),r(),a.clearFile()))},a.isAuthorized=function(e){return a.state.authorized.includes(Y.a.lookup(e))},a.clearFile=function(){return a.setState({file:null})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.modal,a=e.closeModal;return c.a.createElement(k.a,{basic:!0,open:t,onClose:a},c.a.createElement(k.a.Header,null,"Select an Image File"),c.a.createElement(k.a.Content,null,c.a.createElement(A.a,{onChange:this.addFile,fluid:!0,label:"File types: jpg, png",name:"file",type:"file"})),c.a.createElement(k.a.Actions,null,c.a.createElement(w.a,{onClick:this.sendFile,color:"green",inverted:!0},c.a.createElement(O.a,{name:"checkmark"})," Send"),c.a.createElement(w.a,{color:"red",inverted:!0,onClick:a},c.a.createElement(O.a,{name:"remove"})," Cancel")))}}]),t}(c.a.Component),$=a(506),ee=function(e){var t=e.uploadState,a=e.percentUploaded;return"uploading"===t&&c.a.createElement($.a,{className:"progress__bar",percent:a,progress:!0,indicating:!0,size:"medium",inverted:!0})},te=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={storageRef:v.storage().ref(),typingRef:v.database().ref("typing"),uploadTask:null,uploadState:"",percentUploaded:0,message:"",channel:a.props.currentChannel,user:a.props.currentUser,loading:!1,errors:[],modal:!1,emojiPicker:!1},a.openModal=function(){return a.setState({modal:!0})},a.closeModal=function(){return a.setState({modal:!1})},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.handleKeyDown=function(e){e.ctrlKey&&13===e.keyCode&&a.sendMessage();var t=a.state,n=t.message,r=t.typingRef,s=t.channel,o=t.user;n?r.child(s.id).child(o.uid).set(o.displayName):r.child(s.id).child(o.uid).remove()},a.handleTogglePicker=function(){a.setState({emojiPicker:!a.state.emojiPicker})},a.handleAddEmoji=function(e){var t=a.state.message,n=a.colonToUnicode(" ".concat(t," ").concat(e.colons," "));a.setState({message:n,emojiPicker:!1}),setTimeout(function(){return a.messageInputRef.focus()},0)},a.colonToUnicode=function(e){return e.replace(/:[A-Za-z0-9_+-]+:/g,function(e){e=e.replace(/:/g,"");var t=q.b.emojis[e];if("undefined"!==typeof t){var a=t.native;if("undefined"!==typeof a)return a}return e=":"+e+":"})},a.createMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={timestamp:v.database.ServerValue.TIMESTAMP,user:{id:a.state.user.uid,name:a.state.user.displayName,avatar:a.state.user.photoURL}};return null!==e?t.image=e:t.content=a.state.message,t},a.sendMessage=function(){var e=a.props.getMessagesRef,t=a.state,n=t.message,r=t.channel,s=t.user,o=t.typingRef;n?(a.setState({loading:!0}),e().child(r.id).push().set(a.createMessage()).then(function(){a.setState({loading:!1,message:"",errors:[]}),o.child(r.id).child(s.uid).remove()}).catch(function(e){console.error(e),a.setState({loading:!1,errors:a.state.errors.concat(e)})})):a.setState({errors:a.state.errors.concat({message:"Add a message"})})},a.getPath=function(){return a.props.isPrivateChannel?"chat/private/".concat(a.state.channel.id):"chat/public"},a.uploadFile=function(e,t){var n=a.state.channel.id,r=a.props.getMessagesRef(),s="".concat(a.getPath(),"/").concat(G()(),".jpg");a.setState({uploadState:"uploading",uploadTask:a.state.storageRef.child(s).put(e,t)},function(){a.state.uploadTask.on("state_changed",function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);a.setState({percentUploaded:t})},function(e){console.error(e),a.setState({errors:a.state.errors.concat(e),uploadState:"error",uploadTask:null})},function(){a.state.uploadTask.snapshot.ref.getDownloadURL().then(function(e){a.sendFileMessage(e,r,n)}).catch(function(e){console.error(e),a.setState({errors:a.state.errors.concat(e),uploadState:"error",uploadTask:null})})})})},a.sendFileMessage=function(e,t,n){t.child(n).push().set(a.createMessage(e)).then(function(){a.setState({uploadState:"done"})}).catch(function(e){console.error(e),a.setState({errors:a.state.errors.concat(e)})})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){null!==this.state.uploadTask&&(this.state.uploadTask.cancel(),this.setState({uploadTask:null}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.message,r=t.loading,s=t.modal,o=t.uploadState,l=t.percentUploaded,i=t.emojiPicker;return c.a.createElement(Q.a,{className:"message__form"},i&&c.a.createElement(q.a,{set:"apple",onSelect:this.handleAddEmoji,className:"emojipicker",title:"Pick your emoji",emoji:"point_up"}),c.a.createElement(A.a,{fluid:!0,name:"message",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:n,ref:function(t){return e.messageInputRef=t},style:{marginBottom:"0.7em"},label:c.a.createElement(w.a,{icon:i?"close":"add",content:i?"Close":null,onClick:this.handleTogglePicker}),labelPosition:"left",className:a.some(function(e){return e.message.includes("message")})?"error":"",placeholder:"Type your message"}),c.a.createElement(w.a.Group,{icon:!0,widths:"2"},c.a.createElement(w.a,{onClick:this.sendMessage,disabled:r,color:"blue",content:"Send",labelPosition:"left",icon:"edit"}),c.a.createElement(w.a,{color:"teal",disabled:"uploading"===o,onClick:this.openModal,content:"Upload Photo",labelPosition:"right",icon:"cloud upload"})),c.a.createElement(_,{modal:s,closeModal:this.closeModal,uploadFile:this.uploadFile}),c.a.createElement(ee,{uploadState:o,percentUploaded:l}))}}]),t}(c.a.Component),ae=a(262),ne=a.n(ae),re=function(e,t){return e.user.id===t.uid?"message__self":""},se=function(e){var t,a=e.message,n=e.user;return c.a.createElement(H.a,null,c.a.createElement(H.a.Avatar,{src:a.user.avatar}),c.a.createElement(H.a.Content,{className:re(a,n)},c.a.createElement(H.a.Author,{as:"a"},a.user.name),c.a.createElement(H.a.Metadata,{style:{color:"red"}},(t=a.timestamp,ne()(t).fromNow())),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("content")}(a)?c.a.createElement(S.a,{src:a.image,className:"message__image"}):c.a.createElement(H.a.Text,null,a.content)))},oe=function(){return c.a.createElement("div",{className:"typing"},c.a.createElement("div",{className:"typing__dot"}),c.a.createElement("div",{className:"typing__dot"}),c.a.createElement("div",{className:"typing__dot"}))},le=function(){return c.a.createElement("div",{className:"skeleton"},c.a.createElement("div",{className:"skeleton__avatar"}),c.a.createElement("div",{className:"skeleton__author"}),c.a.createElement("div",{className:"skeleton__details"}))},ie=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={privateChannel:a.props.isPrivateChannel,privateMessagesRef:v.database().ref("privateMessages"),messagesRef:v.database().ref("messages"),messages:[],messagesLoading:!0,channel:a.props.currentChannel,isChannelStarred:!1,user:a.props.currentUser,usersRef:v.database().ref("users"),numUniqueUsers:"",searchTerm:"",searchLoading:!1,searchResults:[],typingRef:v.database().ref("typing"),typingUsers:[],connectedRef:v.database().ref(".info/connected"),listeners:[]},a.removeListeners=function(e){e.forEach(function(e){e.ref.child(e.id).off(e.event)})},a.addToListeners=function(e,t,n){if(-1===a.state.listeners.findIndex(function(a){return a.id===e&&a.ref===t&&a.event===n})){var r={id:e,ref:t,event:n};a.setState({listeners:a.state.listeners.concat(r)})}},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.addListeners=function(e){a.addMessageListener(e),a.addTypingListeners(e)},a.addTypingListeners=function(e){var t=[];a.state.typingRef.child(e).on("child_added",function(e){e.key!==a.state.user.uid&&(t=t.concat({id:e.key,name:e.val()}),a.setState({typingUsers:t}))}),a.addToListeners(e,a.state.typingRef,"child_added"),a.state.typingRef.child(e).on("child_removed",function(e){-1!==t.findIndex(function(t){return t.id===e.key})&&(t=t.filter(function(t){return t.id!==e.key}),a.setState({typingUsers:t}))}),a.addToListeners(e,a.state.typingRef,"child_removed"),a.state.connectedRef.on("value",function(t){!0===t.val()&&a.state.typingRef.child(e).child(a.state.user.uid).onDisconnect().remove(function(e){null!==e&&console.error(e)})})},a.addMessageListener=function(e){var t=[],n=a.getMessagesRef();n.child(e).on("child_added",function(e){t.push(e.val()),a.setState({messages:t,messagesLoading:!1}),a.countUniqueUsers(t),a.countUserPosts(t)}),a.addToListeners(e,n,"child_added")},a.addUserStarsListener=function(e,t){a.state.usersRef.child(t).child("starred").once("value").then(function(t){if(null!==t.val()){var n=Object.keys(t.val()).includes(e);a.setState({isChannelStarred:n})}})},a.getMessagesRef=function(){var e=a.state,t=e.messagesRef,n=e.privateMessagesRef;return e.privateChannel?n:t},a.handleStar=function(){a.setState(function(e){return{isChannelStarred:!e.isChannelStarred}},function(){return a.starChannel()})},a.starChannel=function(){a.state.isChannelStarred?a.state.usersRef.child("".concat(a.state.user.uid,"/starred")).update(Object(L.a)({},a.state.channel.id,{name:a.state.channel.name,details:a.state.channel.details,createdBy:{name:a.state.channel.createdBy.name,avatar:a.state.channel.createdBy.avatar}})):a.state.usersRef.child("".concat(a.state.user.uid,"/starred")).child(a.state.channel.id).remove(function(e){null!==e&&console.error(e)})},a.handleSearchChange=function(e){a.setState({searchTerm:e.target.value,searchLoading:!0},function(){return a.handleSearchMessages()})},a.handleSearchMessages=function(){var e=Object(N.a)(a.state.messages),t=new RegExp(a.state.searchTerm,"gi"),n=e.reduce(function(e,a){return(a.content&&a.content.match(t)||a.user.name.match(t))&&e.push(a),e},[]);a.setState({searchResults:n}),setTimeout(function(){return a.setState({searchLoading:!1})},1e3)},a.countUniqueUsers=function(e){var t=e.reduce(function(e,t){return e.includes(t.user.name)||e.push(t.user.name),e},[]),n=t.length>1||0===t.length,r="".concat(t.length," user").concat(n?"s":"");a.setState({numUniqueUsers:r})},a.countUserPosts=function(e){var t=e.reduce(function(e,t){return t.user.name in e?e[t.user.name].count+=1:e[t.user.name]={avatar:t.user.avatar,count:1},e},{});a.props.setUserPosts(t)},a.displayMessages=function(e){return e.length>0&&e.map(function(e){return c.a.createElement(se,{key:e.timestamp,message:e,user:a.state.user})})},a.displayChannelName=function(e){return e?"".concat(a.state.privateChannel?"@":"#").concat(e.name):""},a.displayTypingUsers=function(e){return e.length>0&&e.map(function(e){return c.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.2em"},key:e.id},c.a.createElement("span",{className:"user__typing"},e.name," is typing")," ",c.a.createElement(oe,null))})},a.displayMessageSkeleton=function(e){return e?c.a.createElement(c.a.Fragment,null,Object(N.a)(Array(10)).map(function(e,t){return c.a.createElement(le,{key:t})})):null},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.channel,a=e.user,n=e.listeners;t&&a&&(this.removeListeners(n),this.addListeners(t.id),this.addUserStarsListener(t.id,a.uid))}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.state.listeners),this.state.connectedRef.off()}},{key:"componentDidUpdate",value:function(e,t){this.messagesEnd&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.state,a=t.messagesRef,n=t.messages,r=t.channel,s=t.user,o=t.numUniqueUsers,l=t.searchTerm,i=t.searchResults,u=t.searchLoading,d=t.privateChannel,m=t.isChannelStarred,h=t.typingUsers,f=t.messagesLoading;return c.a.createElement(c.a.Fragment,null,c.a.createElement(J,{channelName:this.displayChannelName(r),numUniqueUsers:o,handleSearchChange:this.handleSearchChange,searchLoading:u,isPrivateChannel:d,handleStar:this.handleStar,isChannelStarred:m}),c.a.createElement(Q.a,null,c.a.createElement(H.a.Group,{className:"messages"},this.displayMessageSkeleton(f),l?this.displayMessages(i):this.displayMessages(n),this.displayTypingUsers(h),c.a.createElement("div",{ref:function(t){return e.messagesEnd=t}}))),c.a.createElement(te,{messagesRef:a,currentChannel:r,currentUser:s,isPrivateChannel:d,getMessagesRef:this.getMessagesRef}))}}]),t}(c.a.Component),ce=Object(h.b)(null,{setUserPosts:function(e){return{type:"SET_USER_POSTS",payload:{userPosts:e}}}})(ie),ue=a(267),de=a(514),me=a(515),he=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={channel:a.props.currentChannel,privateChannel:a.props.isPrivateChannel,activeIndex:0},a.setActiveIndex=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a.formatCount=function(e){return"".concat(e,e>1||0===e?" posts":" post")},a.displayTopPosters=function(e){return Object.entries(e).sort(function(e,t){return t[1]-e[1]}).map(function(e,t){var n=Object(ue.a)(e,2),r=n[0],s=n[1];return c.a.createElement(de.a.Item,{key:t},c.a.createElement(S.a,{avatar:!0,src:s.avatar}),c.a.createElement(de.a.Content,null,c.a.createElement(de.a.Header,{as:"a"},r),c.a.createElement(de.a.Description,null,a.formatCount(s.count))))}).slice(0,2)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeIndex,a=e.privateChannel,n=e.channel;this.props.userPosts;return a?null:c.a.createElement(Q.a,{loading:!n},c.a.createElement(y.a,{as:"h4",attached:"top"},"About: ",n&&n.name),c.a.createElement(me.a,{styled:!0,attached:"true"},c.a.createElement(me.a.Title,{active:0===t,index:0,onClick:this.setActiveIndex},c.a.createElement(O.a,{name:"dropdown"}),c.a.createElement(O.a,{name:"info"}),"Details"),c.a.createElement(me.a.Content,{active:0===t},n&&n.details),c.a.createElement(me.a.Title,{active:1===t,index:1,onClick:this.setActiveIndex},c.a.createElement(O.a,{name:"dropdown"}),c.a.createElement(O.a,{name:"user"}),"Host"),c.a.createElement(me.a.Content,{active:1===t},c.a.createElement(y.a,{as:"h3"},c.a.createElement(S.a,{circular:!0,src:n&&n.createdBy.avatar}),n&&n.createdBy.name))))}}]),t}(c.a.Component),fe=Object(h.b)(function(e){return{currentUser:e.user.currentUser,currentChannel:e.channel.currentChannel,isPrivateChannel:e.channel.isPrivateChannel,userPosts:e.channel.userPosts,primaryColor:e.colors.primaryColor,secondaryColor:e.colors.secondaryColor}})(function(e){var t=e.currentUser,a=e.currentChannel,n=e.isPrivateChannel,r=e.userPosts,s=e.primaryColor,o=e.secondaryColor;return c.a.createElement(m.a,{columns:"equal",className:"app",style:{background:o,minWidth:770}},c.a.createElement(K,{key:t&&t.uid,currentUser:t,primaryColor:s}),c.a.createElement(m.a.Column,{style:{marginLeft:300}},c.a.createElement(ce,{key:a&&a.id,currentChannel:a,currentUser:t,isPrivateChannel:n})),c.a.createElement(m.a.Column,{width:4},c.a.createElement(he,{key:a&&a.name,userPosts:r,currentChannel:a,isPrivateChannel:n})))}),pe=a(516),ge=a(263),ve=a.n(ge),Ce=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",password:"",errors:[],loading:!1},a.displayErrors=function(e){return e.map(function(e,t){return c.a.createElement("p",{key:t},e.message)})},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.isFormValid(a.state)&&(a.setState({errors:[],loading:!0}),v.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(e){console.log(e)}).catch(function(e){console.error(e),a.setState({errors:a.state.errors.concat(e),loading:!1})}))},a.isFormValid=function(e){var t=e.email,a=e.password;return t&&a},a.handleInputError=function(e,t){return e.some(function(e){return e.message.toLowerCase().includes(t)})?"error":""},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.errors,r=e.loading;return c.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",className:"app",style:{background:"white"}},c.a.createElement(m.a.Column,{style:{maxWidth:400}},c.a.createElement(y.a,{textAlign:"center"},c.a.createElement("img",{src:ve.a,alt:"Logo",style:{width:"90%",marginBottom:40}})),c.a.createElement(M.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(Q.a,{stacked:!0},c.a.createElement(M.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:t,className:this.handleInputError(n,"email"),type:"email"}),c.a.createElement(M.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:a,className:this.handleInputError(n,"password"),type:"password"}),c.a.createElement(w.a,{disabled:r,className:r?"loading":"",color:"blue",fluid:!0,size:"large"},"Submit"))),n.length>0&&c.a.createElement(pe.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(n)),c.a.createElement(pe.a,{style:{marginTop:40,marginBottom:40}},"Authorized staff only. If you are a nurse, cook, or dietary supervisor and cannot log in, please contact the administrator.")))}}]),t}(c.a.Component),Ee=a(264),ye=a.n(Ee),be=a(507),Se=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",email:"",password:"",passwordConfirmation:"",errors:[],loading:!1,usersRef:v.database().ref("users")},a.isFormValid=function(){var e,t=[];return a.isFormEmpty(a.state)?(e={message:"Fill in all fields"},a.setState({errors:t.concat(e)}),!1):!!a.isPasswordValid(a.state)||(e={message:"Password is invalid"},a.setState({errors:t.concat(e)}),!1)},a.isFormEmpty=function(e){var t=e.username,a=e.email,n=e.password,r=e.passwordConfirmation;return!t.length||!a.length||!n.length||!r.length},a.isPasswordValid=function(e){var t=e.password,a=e.passwordConfirmation;return!(t.length<6||a.length<6)&&t===a},a.displayErrors=function(e){return e.map(function(e,t){return c.a.createElement("p",{key:t},e.message)})},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.isFormValid()&&(a.setState({errors:[],loading:!0}),v.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then(function(e){console.log(e),e.user.updateProfile({displayName:a.state.username,photoURL:"http://gravatar.com/avatar/".concat(ye()(e.user.email),"?d=identicon")}).then(function(){a.saveUser(e).then(function(){console.log("user saved")})}).catch(function(e){console.error(e),a.setState({errors:a.state.errors.concat(e),loading:!1})})}).catch(function(e){console.error(e),a.setState({errors:a.state.errors.concat(e),loading:!1})}))},a.saveUser=function(e){return a.state.usersRef.child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL})},a.handleInputError=function(e,t){return e.some(function(e){return e.message.toLowerCase().includes(t)})?"error":""},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,r=e.passwordConfirmation,s=e.errors,o=e.loading;return c.a.createElement(m.a,{textAlign:"center",verticalAlign:"middle",className:"app",style:{background:"linear-gradient(to bottom, #660066 0%, #ffffff 200%)"}},c.a.createElement(m.a.Column,{style:{maxWidth:350}},c.a.createElement(y.a,{textAlign:"center"},c.a.createElement("img",{src:U.a,alt:"Logo",style:{width:"80%",marginTop:"10%",marginBottom:"10%"}}),c.a.createElement("br",null),c.a.createElement("i",{class:"inverted large user plus icon",style:{display:"inline-block",marginBottom:20}})),c.a.createElement(M.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(Q.a,{stacked:!0},c.a.createElement(M.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:t,type:"text"}),c.a.createElement(M.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:a,className:this.handleInputError(s,"email"),type:"email"}),c.a.createElement(M.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleChange,value:n,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(M.a.Input,{fluid:!0,name:"passwordConfirmation",icon:"repeat",iconPosition:"left",placeholder:"Password Confirmation",onChange:this.handleChange,value:r,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(w.a,{disabled:o,className:o?"loading":"",color:"blue",fluid:!0,size:"large"},"Submit"))),s.length>0&&c.a.createElement(pe.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(s)),c.a.createElement(pe.a,null,"Already a user? ",c.a.createElement(be.a,{to:"/login"},"Login"))))}}]),t}(c.a.Component),ke=a(519),Ae=a(508),we=function(){return c.a.createElement(ke.a,{active:!0},c.a.createElement(Ae.a,{size:"huge",content:"Preparing Chat..."}))},Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(491);var Ue=a(525),Re=a(509),Ne=a(526),Le=a(522),Pe=a(65),Ie=a(265),Te={currentUser:null,isLoading:!0},Me={currentChannel:null,isPrivateChannel:!1,userPosts:null},Be={primaryColor:"#4c3c4c",secondaryColor:"#eee"},Fe=Object(Pe.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{currentUser:t.payload.currentUser,isLoading:!1};case"CLEAR_USER":return Object(z.a)({},e,{isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CHANNEL":return Object(z.a)({},e,{currentChannel:t.payload.currentChannel});case"SET_PRIVATE_CHANNEL":return Object(z.a)({},e,{isPrivateChannel:t.payload.isPrivateChannel});case"SET_USER_POSTS":return Object(z.a)({},e,{userPosts:t.payload.userPosts});default:return e}},colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLORS":return{primaryColor:t.payload.primaryColor,secondaryColor:t.payload.secondaryColor};default:return e}}}),De=Object(Pe.createStore)(Fe,Object(Ie.composeWithDevTools)()),xe=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.auth().onAuthStateChanged(function(t){t?(e.props.setUser(t),e.props.history.push("/")):(e.props.history.push("/login"),e.props.clearUser())})}},{key:"render",value:function(){return this.props.isLoading?c.a.createElement(we,null):c.a.createElement(Ue.a,null,c.a.createElement(Re.a,{exact:!0,path:"/",component:fe}),c.a.createElement(Re.a,{path:"/login",component:Ce}),c.a.createElement(Re.a,{path:"/register",component:Se}))}}]),t}(c.a.Component),ze=Object(Ne.a)(Object(h.b)(function(e){return{isLoading:e.user.isLoading}},{setUser:function(e){return{type:"SET_USER",payload:{currentUser:e}}},clearUser:function(){return{type:"CLEAR_USER"}}})(xe));d.a.render(c.a.createElement(h.a,{store:De},c.a.createElement(Le.a,null,c.a.createElement(ze,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Oe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):je(e)})}}()}},[[277,2,1]]]);
//# sourceMappingURL=main.e0ac2aeb.chunk.js.map